$ Comprehensive test file for nested tuples
$ Tests various nesting patterns, access, and operations

$ Test 1: Simple 2D tuple (tuple of tuples)
show "Test 1 - 2D Tuple (3x3):";
put <<1, 2, 3>, <4, 5, 6>, <7, 8, 9>> in matrix;
show matrix;
show "Row 0: " + matrix / 0;
show "Row 1: " + matrix / 1;
show "Row 2: " + matrix / 2;

$ Test 2: Accessing nested tuple elements
show "";
show "Test 2 - Nested Element Access:";
show "Element [0][0]: " + (matrix / 0) / 0;
show "Element [0][2]: " + (matrix / 0) / 2;
show "Element [1][1]: " + (matrix / 1) / 1;
show "Element [2][0]: " + (matrix / 2) / 0;
show "Element [2][2]: " + (matrix / 2) / 2;

$ Test 3: Triple nested tuple
show "";
show "Test 3 - Triple Nested Tuple:";
put <<<1, 2>, <3, 4>>, <<5, 6>, <7, 8>>> in triple_nested;
show triple_nested;
show "First group: " + triple_nested / 0;
show "Second group: " + triple_nested / 1;
show "Element [0][0][0]: " + ((triple_nested / 0) / 0) / 0;
show "Element [0][1][1]: " + ((triple_nested / 0) / 1) / 1;
show "Element [1][0][0]: " + ((triple_nested / 1) / 0) / 0;
show "Element [1][1][1]: " + ((triple_nested / 1) / 1) / 1;

$ Test 4: Tuple of different sized tuples (jagged)
show "";
show "Test 4 - Jagged Tuple:";
put <<1>, <2, 3>, <4, 5, 6>, <7, 8, 9, 10>> in jagged;
show jagged;
show "Row 0 length: " + len(jagged / 0);
show "Row 1 length: " + len(jagged / 1);
show "Row 2 length: " + len(jagged / 2);
show "Row 3 length: " + len(jagged / 3);

$ Test 5: Nested tuple with mixed types
show "";
show "Test 5 - Mixed Types in Nested Tuple:";
put <<1, "a", 3.14>, <true, false, 42>, <"x", "y", "z">> in mixed_nested;
show mixed_nested;
show "First row, second element: " + (mixed_nested / 0) / 1;
show "Second row, first element: " + (mixed_nested / 1) / 0;
show "Third row, third element: " + (mixed_nested / 2) / 2;

$ Test 6: Tuple containing empty tuples
show "";
show "Test 6 - Tuple with Empty Tuples:";
put <<>, <1, 2>, <>, <3, 4, 5>> in with_empty;
show with_empty;
show "First element (empty): " + with_empty / 0;
show "Second element: " + with_empty / 1;
show "Third element (empty): " + with_empty / 2;
show "Fourth element: " + with_empty / 3;

$ Test 7: Deep nesting (4 levels)
show "";
show "Test 7 - Four Level Deep Nesting:";
put <<<<1, 2>, <3, 4>>, <<5, 6>, <7, 8>>>, <<<9, 10>, <11, 12>>, <<13, 14>, <15, 16>>>> in deep;
show deep;
show "Access [0][0][0][0]: " + (((deep / 0) / 0) / 0) / 0;
show "Access [0][1][1][1]: " + (((deep / 0) / 1) / 1) / 1;
show "Access [1][0][0][1]: " + (((deep / 1) / 0) / 0) / 1;
show "Access [1][1][1][0]: " + (((deep / 1) / 1) / 1) / 0;

$ Test 8: Iterating over nested tuples
show "";
show "Test 8 - Iterate Over Nested Tuple:";
put <<10, 20>, <30, 40>, <50, 60>> in pairs;
put 0 in row_num;
cycle each row through pairs:
    show "Row " + row_num + ": " + row;
    put 0 in col_num;
    cycle each value through row:
        show "  [" + row_num + "][" + col_num + "] = " + value;
        put col_num + 1 in col_num;
    end;
    put row_num + 1 in row_num;
end;

$ Test 9: Nested tuple concatenation
show "";
show "Test 9 - Nested Tuple Concatenation:";
put <<1, 2>, <3, 4>> in t1;
put <<5, 6>, <7, 8>> in t2;
put t1 * t2 in combined;
show "T1: " + t1;
show "T2: " + t2;
show "Combined: " + combined;
show "Combined length: " + len(combined);

$ Test 10: Nested tuple immutability
show "";
show "Test 10 - Nested Tuple Immutability:";
put <<1, 2, 3>, <4, 5, 6>> in immut;
show "Original: " + immut;
attempt:
    put immut + <7, 8, 9> in modified;
end
handle as error:
    show "Cannot modify outer tuple: " + error_message(error);
end;
attempt:
    put (immut / 0) + 4 in modified_inner;
end
handle as error:
    show "Cannot modify inner tuple: " + error_message(error);
end;

$ Test 11: Tuple of tuples with strings
show "";
show "Test 11 - Nested String Tuples:";
put <<"apple", "banana">, <"cherry", "date">, <"elderberry", "fig">> in fruits;
show fruits;
cycle each pair through fruits:
    show "Pair: " + pair;
    show "  First: " + pair / 0;
    show "  Second: " + pair / 1;
end;

$ Test 12: Coordinate system (nested tuple application)
show "";
show "Test 12 - 3D Coordinate System:";
make function create_3d_point(x, y, z):
    give <x, y, z>;
end;

put <create_3d_point(1, 2, 3), create_3d_point(4, 5, 6), create_3d_point(7, 8, 9)> in points;
show "Points: " + points;
put 0 in idx;
cycle each point through points:
    show "Point " + idx + ": " + point;
    show "  X: " + point / 0;
    show "  Y: " + point / 1;
    show "  Z: " + point / 2;
    put idx + 1 in idx;
end;

$ Test 13: Nested tuple from function
show "";
show "Test 13 - Function Returning Nested Tuple:";
make function create_matrix(rows, cols, value):
    put <> in result;
    cycle i from 0 to rows - 1:
        put <> in row;
        cycle j from 0 to cols - 1:
            put row * <value> in row;
        end;
        put result * <row> in result;
    end;
    give result;
end;

put create_matrix(3, 3, 0) in zero_matrix;
show "3x3 Zero Matrix: " + zero_matrix;

$ Test 14: Mixed nesting - tuple in tuple
show "";
show "Test 14 - Progressive Nesting:";
put <1, 2, 3> in level1;
put <level1, <4, 5, 6>> in level2;
put <level2, <<7, 8>, <9, 10>>> in level3;
show "Level 1: " + level1;
show "Level 2: " + level2;
show "Level 3: " + level3;

$ Test 15: Tuple length of nested tuples
show "";
show "Test 15 - Lengths in Nested Structure:";
put <<<1, 2, 3>, <4, 5>>, <<6>, <7, 8, 9, 10>>> in complex;
show "Outer length: " + len(complex);
show "Length of complex/0: " + len(complex / 0);
show "Length of complex/1: " + len(complex / 1);
show "Length of complex/0/0: " + len((complex / 0) / 0);
show "Length of complex/0/1: " + len((complex / 0) / 1);
show "Length of complex/1/0: " + len((complex / 1) / 0);
show "Length of complex/1/1: " + len((complex / 1) / 1);

show "";
show "All nested tuple tests completed!";
